"edimg0j"の説明

  これはDiskExplorerのCUI版のバグフィクス＋α、みたいなものを目指しているツール
です。とりあえずOSASKのディスクイメージくらいは作れるようになりました。

[コマンドライン]

  prompt>edimg コマンド列 （@スクリプトファイル が混在していてもよい）

  example>edimg imgin:osaimgat.bin bias:9 copy from:@:!guide!.txt to:./
  example>edimg @srcipt0.txt
  example>edimg imgin:osaimgat.bin @script1.txt
  example>edimg binin:osask.exe exe2bin seg:2048 binout:osask.sys

  スクリプトファイルはコマンド列が並んだだけのものです。コマンドライン中の指定
された場所に展開されます。edimgではスペースや改行をパラメータの区切りとして見な
すので、スペースを含むファイル名は扱えません。

[コマンドの説明]

  コマンドは次のようなフォーマットになります。

    コマンド名  パラメータ名:パラメータ  パラメータ名:パラメータ  ...

  コマンド名は、optコマンドに限り省略可能です。

・optコマンド

  optコマンドはパラメータを一つだけ持ちます。複数書いた場合は、optコマンドその
ものが複数個あると見なされます。このコマンドはパラメータによって与える動作が大
きく異なります。なお、パラメータが与えられなければ、optコマンドは何もしません。

  imginパラメータ：
    書式： [opt] imgin:ファイル名
      指定されたファイルをディスクイメージとして読み込みます。パーティション情
    報を持っているディスクイメージの場合、最初のパーティションへアクセスするこ
    とになります。

  imgoutパラメータ：
    書式： [opt] imgout:ファイル名
      ディスクイメージを指定されたファイルとして出力します。

  vsizパラメータ：
    書式： [opt] vsiz:イメージサイズ
      ディスクイメージを指定された大きさに変更します。SF16に対して使います。

  bininパラメータ：
    書式： [opt] binin:ファイル名
      指定されたファイルをバイナリイメージとして読み込みます。これに対しては、
    wbinimgコマンドとwritedataコマンドとexe2binコマンドしか使えません。

  binoutパラメータ：
    書式： [opt] binout:ファイル名
      バイナリイメージを指定されたファイルとして出力します。

  _pathパラメータ：
    書式： [opt] _path:ベースパス
      パス指定で、先頭に"_:"という表記があれば、指定されたベースパスに置換して
    解釈します。ベースパスに@:は指定できません。

  biasパラメータ：
    書式： [opt] bias:時差
      ディスクイメージ内のファイルのタイムスタンプ補正のためのパラメータです。
    日本では9を指定します。

・copyコマンド

  書式： copy [nocmp:] from:ファイル名 to:ファイル名

  copyコマンドは2つのパラメータを持ち、fromからtoへファイルをコピーします。from
とtoの順序を逆に書くことはできません。toのファイル名に限り、ファイル名の最後を
":"、"/"で打ち切ることが許されます。この場合、fromのファイル名が補われます。フ
ァイル名ではなくディレクトリ名を書くときは必ず最後の/を忘れないでください。

  ファイル名においてドライブ名"@"を使うと、それはディスクイメージを意味します。
ディスクイメージ内のファイルをディスクイメージ内へコピーすることもできますし、
普通のファイルコピーも可能です。

  オプションのnocmp:を使うと、fromで指定されたファイルが圧縮されていた場合、展
開した結果をtoへ書き込みます。圧縮されていなかった場合はそのまま書き込みます。

  ワイルドカードは使えません。

・ovrcopyコマンド

  書式： ovrcopy [nocmp:] from:ファイル名 to:ファイル名

  オーバーライトコピーコマンドです。toのファイルが既に存在していれば、クラスタ
の位置が変わらないように注意深くコピーされます。ファイルが存在していなければ、
コピーコマンドと全く変わりません。そのほかのこともコピーコマンドと同じです。

・createコマンド

  書式： create file:ファイル名 size:サイズ [begin:開始クラスタ番号]

  中身が0x00で埋まったファイルを作ります。

・ovrcreateコマンド

  書式： ovrcreate file:ファイル名 size:サイズ [begin:開始クラスタ番号]

  基本的にcreateコマンドと同じですが、もしファイルが既に存在していて、さらに指定
サイズよりも大きいか等しければ、ファイルサイズを変更することなく、サイズ分だけ
0x00で埋め尽くすだけにします。

・setattrコマンド

  書式： setattr file:ファイル名(@:〜でなければいけない) attr:アトリビュート値

  ディスクイメージ内のファイルの、ファイル属性値を変更します。

・deleteコマンド

  書式： delete file:ファイル名

